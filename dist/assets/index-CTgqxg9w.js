(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Vt(t,e){return function(){return t.apply(e,arguments)}}const{toString:Hr}=Object.prototype,{getPrototypeOf:lt}=Object,ke=(t=>e=>{const r=Hr.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),z=t=>(t=t.toLowerCase(),e=>ke(e)===t),De=t=>e=>typeof e===t,{isArray:oe}=Array,me=De("undefined");function jr(t){return t!==null&&!me(t)&&t.constructor!==null&&!me(t.constructor)&&k(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Jt=z("ArrayBuffer");function zr(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Jt(t.buffer),e}const qr=De("string"),k=De("function"),Kt=De("number"),$e=t=>t!==null&&typeof t=="object",Wr=t=>t===!0||t===!1,_e=t=>{if(ke(t)!=="object")return!1;const e=lt(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Qr=z("Date"),Vr=z("File"),Jr=z("Blob"),Kr=z("FileList"),Xr=t=>$e(t)&&k(t.pipe),Yr=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||k(t.append)&&((e=ke(t))==="formdata"||e==="object"&&k(t.toString)&&t.toString()==="[object FormData]"))},Gr=z("URLSearchParams"),[Zr,en,tn,rn]=["ReadableStream","Request","Response","Headers"].map(z),nn=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ge(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,s;if(typeof t!="object"&&(t=[t]),oe(t))for(n=0,s=t.length;n<s;n++)e.call(null,t[n],n,t);else{const i=r?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(n=0;n<o;n++)a=i[n],e.call(null,t[a],a,t)}}function Xt(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,s;for(;n-- >0;)if(s=r[n],e===s.toLowerCase())return s;return null}const te=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Yt=t=>!me(t)&&t!==te;function Ye(){const{caseless:t}=Yt(this)&&this||{},e={},r=(n,s)=>{const i=t&&Xt(e,s)||s;_e(e[i])&&_e(n)?e[i]=Ye(e[i],n):_e(n)?e[i]=Ye({},n):oe(n)?e[i]=n.slice():e[i]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&ge(arguments[n],r);return e}const sn=(t,e,r,{allOwnKeys:n}={})=>(ge(e,(s,i)=>{r&&k(s)?t[i]=Vt(s,r):t[i]=s},{allOwnKeys:n}),t),on=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),an=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},cn=(t,e,r,n)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!n||n(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=r!==!1&&lt(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},un=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},ln=t=>{if(!t)return null;if(oe(t))return t;let e=t.length;if(!Kt(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},fn=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&lt(Uint8Array)),hn=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=n.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},dn=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},pn=z("HTMLFormElement"),mn=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),wt=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),yn=z("RegExp"),Gt=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};ge(r,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(n[i]=o||s)}),Object.defineProperties(t,n)},gn=t=>{Gt(t,(e,r)=>{if(k(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(k(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},wn=(t,e)=>{const r={},n=s=>{s.forEach(i=>{r[i]=!0})};return oe(t)?n(t):n(String(t).split(e)),r},En=()=>{},bn=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function An(t){return!!(t&&k(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const _n=t=>{const e=new Array(10),r=(n,s)=>{if($e(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[s]=n;const i=oe(n)?[]:{};return ge(n,(o,a)=>{const c=r(o,s+1);!me(c)&&(i[a]=c)}),e[s]=void 0,i}}return n};return r(t,0)},vn=z("AsyncFunction"),Tn=t=>t&&($e(t)||k(t))&&k(t.then)&&k(t.catch),Zt=((t,e)=>t?setImmediate:e?((r,n)=>(te.addEventListener("message",({source:s,data:i})=>{s===te&&i===r&&n.length&&n.shift()()},!1),s=>{n.push(s),te.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",k(te.postMessage)),Cn=typeof queueMicrotask<"u"?queueMicrotask.bind(te):typeof process<"u"&&process.nextTick||Zt,f={isArray:oe,isArrayBuffer:Jt,isBuffer:jr,isFormData:Yr,isArrayBufferView:zr,isString:qr,isNumber:Kt,isBoolean:Wr,isObject:$e,isPlainObject:_e,isReadableStream:Zr,isRequest:en,isResponse:tn,isHeaders:rn,isUndefined:me,isDate:Qr,isFile:Vr,isBlob:Jr,isRegExp:yn,isFunction:k,isStream:Xr,isURLSearchParams:Gr,isTypedArray:fn,isFileList:Kr,forEach:ge,merge:Ye,extend:sn,trim:nn,stripBOM:on,inherits:an,toFlatObject:cn,kindOf:ke,kindOfTest:z,endsWith:un,toArray:ln,forEachEntry:hn,matchAll:dn,isHTMLForm:pn,hasOwnProperty:wt,hasOwnProp:wt,reduceDescriptors:Gt,freezeMethods:gn,toObjectSet:wn,toCamelCase:mn,noop:En,toFiniteNumber:bn,findKey:Xt,global:te,isContextDefined:Yt,isSpecCompliantForm:An,toJSONObject:_n,isAsyncFn:vn,isThenable:Tn,setImmediate:Zt,asap:Cn};function A(t,e,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}f.inherits(A,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:f.toJSONObject(this.config),code:this.code,status:this.status}}});const er=A.prototype,tr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{tr[t]={value:t}});Object.defineProperties(A,tr);Object.defineProperty(er,"isAxiosError",{value:!0});A.from=(t,e,r,n,s,i)=>{const o=Object.create(er);return f.toFlatObject(t,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),A.call(o,t.message,e,r,n,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const Sn=null;function Ge(t){return f.isPlainObject(t)||f.isArray(t)}function rr(t){return f.endsWith(t,"[]")?t.slice(0,-2):t}function Et(t,e,r){return t?t.concat(e).map(function(s,i){return s=rr(s),!r&&i?"["+s+"]":s}).join(r?".":""):e}function Rn(t){return f.isArray(t)&&!t.some(Ge)}const xn=f.toFlatObject(f,{},null,function(e){return/^is[A-Z]/.test(e)});function Ue(t,e,r){if(!f.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=f.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,d){return!f.isUndefined(d[g])});const n=r.metaTokens,s=r.visitor||l,i=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&f.isSpecCompliantForm(e);if(!f.isFunction(s))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(f.isDate(p))return p.toISOString();if(!c&&f.isBlob(p))throw new A("Blob is not supported. Use a Buffer instead.");return f.isArrayBuffer(p)||f.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function l(p,g,d){let _=p;if(p&&!d&&typeof p=="object"){if(f.endsWith(g,"{}"))g=n?g:g.slice(0,-2),p=JSON.stringify(p);else if(f.isArray(p)&&Rn(p)||(f.isFileList(p)||f.endsWith(g,"[]"))&&(_=f.toArray(p)))return g=rr(g),_.forEach(function(b,O){!(f.isUndefined(b)||b===null)&&e.append(o===!0?Et([g],O,i):o===null?g:g+"[]",u(b))}),!1}return Ge(p)?!0:(e.append(Et(d,g,i),u(p)),!1)}const h=[],m=Object.assign(xn,{defaultVisitor:l,convertValue:u,isVisitable:Ge});function y(p,g){if(!f.isUndefined(p)){if(h.indexOf(p)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(p),f.forEach(p,function(_,v){(!(f.isUndefined(_)||_===null)&&s.call(e,_,f.isString(v)?v.trim():v,g,m))===!0&&y(_,g?g.concat(v):[v])}),h.pop()}}if(!f.isObject(t))throw new TypeError("data must be an object");return y(t),e}function bt(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function ft(t,e){this._pairs=[],t&&Ue(t,this,e)}const nr=ft.prototype;nr.append=function(e,r){this._pairs.push([e,r])};nr.toString=function(e){const r=e?function(n){return e.call(this,n,bt)}:bt;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function On(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function sr(t,e,r){if(!e)return t;const n=r&&r.encode||On;f.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let i;if(s?i=s(e,r):i=f.isURLSearchParams(e)?e.toString():new ft(e,r).toString(n),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class At{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){f.forEach(this.handlers,function(n){n!==null&&e(n)})}}const ir={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Fn=typeof URLSearchParams<"u"?URLSearchParams:ft,Pn=typeof FormData<"u"?FormData:null,Mn=typeof Blob<"u"?Blob:null,Bn={isBrowser:!0,classes:{URLSearchParams:Fn,FormData:Pn,Blob:Mn},protocols:["http","https","file","blob","url","data"]},ht=typeof window<"u"&&typeof document<"u",Ze=typeof navigator=="object"&&navigator||void 0,Nn=ht&&(!Ze||["ReactNative","NativeScript","NS"].indexOf(Ze.product)<0),Ln=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",In=ht&&window.location.href||"http://localhost",kn=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ht,hasStandardBrowserEnv:Nn,hasStandardBrowserWebWorkerEnv:Ln,navigator:Ze,origin:In},Symbol.toStringTag,{value:"Module"})),F={...kn,...Bn};function Dn(t,e){return Ue(t,new F.classes.URLSearchParams,Object.assign({visitor:function(r,n,s,i){return F.isNode&&f.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function $n(t){return f.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Un(t){const e={},r=Object.keys(t);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],e[i]=t[i];return e}function or(t){function e(r,n,s,i){let o=r[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),c=i>=r.length;return o=!o&&f.isArray(s)?s.length:o,c?(f.hasOwnProp(s,o)?s[o]=[s[o],n]:s[o]=n,!a):((!s[o]||!f.isObject(s[o]))&&(s[o]=[]),e(r,n,s[o],i)&&f.isArray(s[o])&&(s[o]=Un(s[o])),!a)}if(f.isFormData(t)&&f.isFunction(t.entries)){const r={};return f.forEachEntry(t,(n,s)=>{e($n(n),s,r,0)}),r}return null}function Hn(t,e,r){if(f.isString(t))try{return(e||JSON.parse)(t),f.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const we={transitional:ir,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,i=f.isObject(e);if(i&&f.isHTMLForm(e)&&(e=new FormData(e)),f.isFormData(e))return s?JSON.stringify(or(e)):e;if(f.isArrayBuffer(e)||f.isBuffer(e)||f.isStream(e)||f.isFile(e)||f.isBlob(e)||f.isReadableStream(e))return e;if(f.isArrayBufferView(e))return e.buffer;if(f.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Dn(e,this.formSerializer).toString();if((a=f.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Ue(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),Hn(e)):e}],transformResponse:[function(e){const r=this.transitional||we.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(f.isResponse(e)||f.isReadableStream(e))return e;if(e&&f.isString(e)&&(n&&!this.responseType||s)){const o=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?A.from(a,A.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:F.classes.FormData,Blob:F.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};f.forEach(["delete","get","head","post","put","patch"],t=>{we.headers[t]={}});const jn=f.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),zn=t=>{const e={};let r,n,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),r=o.substring(0,s).trim().toLowerCase(),n=o.substring(s+1).trim(),!(!r||e[r]&&jn[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},_t=Symbol("internals");function ue(t){return t&&String(t).trim().toLowerCase()}function ve(t){return t===!1||t==null?t:f.isArray(t)?t.map(ve):String(t)}function qn(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const Wn=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function We(t,e,r,n,s){if(f.isFunction(n))return n.call(this,e,r);if(s&&(e=r),!!f.isString(e)){if(f.isString(n))return e.indexOf(n)!==-1;if(f.isRegExp(n))return n.test(e)}}function Qn(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function Vn(t,e){const r=f.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(s,i,o){return this[n].call(this,e,s,i,o)},configurable:!0})})}let P=class{constructor(e){e&&this.set(e)}set(e,r,n){const s=this;function i(a,c,u){const l=ue(c);if(!l)throw new Error("header name must be a non-empty string");const h=f.findKey(s,l);(!h||s[h]===void 0||u===!0||u===void 0&&s[h]!==!1)&&(s[h||c]=ve(a))}const o=(a,c)=>f.forEach(a,(u,l)=>i(u,l,c));if(f.isPlainObject(e)||e instanceof this.constructor)o(e,r);else if(f.isString(e)&&(e=e.trim())&&!Wn(e))o(zn(e),r);else if(f.isHeaders(e))for(const[a,c]of e.entries())i(c,a,n);else e!=null&&i(r,e,n);return this}get(e,r){if(e=ue(e),e){const n=f.findKey(this,e);if(n){const s=this[n];if(!r)return s;if(r===!0)return qn(s);if(f.isFunction(r))return r.call(this,s,n);if(f.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=ue(e),e){const n=f.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||We(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let s=!1;function i(o){if(o=ue(o),o){const a=f.findKey(n,o);a&&(!r||We(n,n[a],a,r))&&(delete n[a],s=!0)}}return f.isArray(e)?e.forEach(i):i(e),s}clear(e){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const i=r[n];(!e||We(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const r=this,n={};return f.forEach(this,(s,i)=>{const o=f.findKey(n,i);if(o){r[o]=ve(s),delete r[i];return}const a=e?Qn(i):String(i).trim();a!==i&&delete r[i],r[a]=ve(s),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return f.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=e&&f.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[_t]=this[_t]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=ue(o);n[a]||(Vn(s,o),n[a]=!0)}return f.isArray(e)?e.forEach(i):i(e),this}};P.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);f.reduceDescriptors(P.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});f.freezeMethods(P);function Qe(t,e){const r=this||we,n=e||r,s=P.from(n.headers);let i=n.data;return f.forEach(t,function(a){i=a.call(r,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function ar(t){return!!(t&&t.__CANCEL__)}function ae(t,e,r){A.call(this,t??"canceled",A.ERR_CANCELED,e,r),this.name="CanceledError"}f.inherits(ae,A,{__CANCEL__:!0});function cr(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new A("Request failed with status code "+r.status,[A.ERR_BAD_REQUEST,A.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Jn(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Kn(t,e){t=t||10;const r=new Array(t),n=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),l=n[i];o||(o=u),r[s]=c,n[s]=u;let h=i,m=0;for(;h!==s;)m+=r[h++],h=h%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),u-o<e)return;const y=l&&u-l;return y?Math.round(m*1e3/y):void 0}}function Xn(t,e){let r=0,n=1e3/e,s,i;const o=(u,l=Date.now())=>{r=l,s=null,i&&(clearTimeout(i),i=null),t.apply(null,u)};return[(...u)=>{const l=Date.now(),h=l-r;h>=n?o(u,l):(s=u,i||(i=setTimeout(()=>{i=null,o(s)},n-h)))},()=>s&&o(s)]}const Fe=(t,e,r=3)=>{let n=0;const s=Kn(50,250);return Xn(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,c=o-n,u=s(c),l=o<=a;n=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:c,rate:u||void 0,estimated:u&&a&&l?(a-o)/u:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},r)},vt=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},Tt=t=>(...e)=>f.asap(()=>t(...e)),Yn=F.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,F.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(F.origin),F.navigator&&/(msie|trident)/i.test(F.navigator.userAgent)):()=>!0,Gn=F.hasStandardBrowserEnv?{write(t,e,r,n,s,i){const o=[t+"="+encodeURIComponent(e)];f.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),f.isString(n)&&o.push("path="+n),f.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Zn(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function es(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function ur(t,e,r){let n=!Zn(e);return t&&n||r==!1?es(t,e):e}const Ct=t=>t instanceof P?{...t}:t;function ne(t,e){e=e||{};const r={};function n(u,l,h,m){return f.isPlainObject(u)&&f.isPlainObject(l)?f.merge.call({caseless:m},u,l):f.isPlainObject(l)?f.merge({},l):f.isArray(l)?l.slice():l}function s(u,l,h,m){if(f.isUndefined(l)){if(!f.isUndefined(u))return n(void 0,u,h,m)}else return n(u,l,h,m)}function i(u,l){if(!f.isUndefined(l))return n(void 0,l)}function o(u,l){if(f.isUndefined(l)){if(!f.isUndefined(u))return n(void 0,u)}else return n(void 0,l)}function a(u,l,h){if(h in e)return n(u,l);if(h in t)return n(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,l,h)=>s(Ct(u),Ct(l),h,!0)};return f.forEach(Object.keys(Object.assign({},t,e)),function(l){const h=c[l]||s,m=h(t[l],e[l],l);f.isUndefined(m)&&h!==a||(r[l]=m)}),r}const lr=t=>{const e=ne({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=e;e.headers=o=P.from(o),e.url=sr(ur(e.baseURL,e.url),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(f.isFormData(r)){if(F.hasStandardBrowserEnv||F.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[u,...l]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...l].join("; "))}}if(F.hasStandardBrowserEnv&&(n&&f.isFunction(n)&&(n=n(e)),n||n!==!1&&Yn(e.url))){const u=s&&i&&Gn.read(i);u&&o.set(s,u)}return e},ts=typeof XMLHttpRequest<"u",rs=ts&&function(t){return new Promise(function(r,n){const s=lr(t);let i=s.data;const o=P.from(s.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:u}=s,l,h,m,y,p;function g(){y&&y(),p&&p(),s.cancelToken&&s.cancelToken.unsubscribe(l),s.signal&&s.signal.removeEventListener("abort",l)}let d=new XMLHttpRequest;d.open(s.method.toUpperCase(),s.url,!0),d.timeout=s.timeout;function _(){if(!d)return;const b=P.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),S={data:!a||a==="text"||a==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:b,config:t,request:d};cr(function(x){r(x),g()},function(x){n(x),g()},S),d=null}"onloadend"in d?d.onloadend=_:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(_)},d.onabort=function(){d&&(n(new A("Request aborted",A.ECONNABORTED,t,d)),d=null)},d.onerror=function(){n(new A("Network Error",A.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let O=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const S=s.transitional||ir;s.timeoutErrorMessage&&(O=s.timeoutErrorMessage),n(new A(O,S.clarifyTimeoutError?A.ETIMEDOUT:A.ECONNABORTED,t,d)),d=null},i===void 0&&o.setContentType(null),"setRequestHeader"in d&&f.forEach(o.toJSON(),function(O,S){d.setRequestHeader(S,O)}),f.isUndefined(s.withCredentials)||(d.withCredentials=!!s.withCredentials),a&&a!=="json"&&(d.responseType=s.responseType),u&&([m,p]=Fe(u,!0),d.addEventListener("progress",m)),c&&d.upload&&([h,y]=Fe(c),d.upload.addEventListener("progress",h),d.upload.addEventListener("loadend",y)),(s.cancelToken||s.signal)&&(l=b=>{d&&(n(!b||b.type?new ae(null,t,d):b),d.abort(),d=null)},s.cancelToken&&s.cancelToken.subscribe(l),s.signal&&(s.signal.aborted?l():s.signal.addEventListener("abort",l)));const v=Jn(s.url);if(v&&F.protocols.indexOf(v)===-1){n(new A("Unsupported protocol "+v+":",A.ERR_BAD_REQUEST,t));return}d.send(i||null)})},ns=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,s;const i=function(u){if(!s){s=!0,a();const l=u instanceof Error?u:this.reason;n.abort(l instanceof A?l:new ae(l instanceof Error?l.message:l))}};let o=e&&setTimeout(()=>{o=null,i(new A(`timeout ${e} of ms exceeded`,A.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),t=null)};t.forEach(u=>u.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>f.asap(a),c}},ss=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,s;for(;n<r;)s=n+e,yield t.slice(n,s),n=s},is=async function*(t,e){for await(const r of os(t))yield*ss(r,e)},os=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},St=(t,e,r,n)=>{const s=is(t,e);let i=0,o,a=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:u,value:l}=await s.next();if(u){a(),c.close();return}let h=l.byteLength;if(r){let m=i+=h;r(m)}c.enqueue(new Uint8Array(l))}catch(u){throw a(u),u}},cancel(c){return a(c),s.return()}},{highWaterMark:2})},He=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",fr=He&&typeof ReadableStream=="function",as=He&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),hr=(t,...e)=>{try{return!!t(...e)}catch{return!1}},cs=fr&&hr(()=>{let t=!1;const e=new Request(F.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),Rt=64*1024,et=fr&&hr(()=>f.isReadableStream(new Response("").body)),Pe={stream:et&&(t=>t.body)};He&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Pe[e]&&(Pe[e]=f.isFunction(t[e])?r=>r[e]():(r,n)=>{throw new A(`Response type '${e}' is not supported`,A.ERR_NOT_SUPPORT,n)})})})(new Response);const us=async t=>{if(t==null)return 0;if(f.isBlob(t))return t.size;if(f.isSpecCompliantForm(t))return(await new Request(F.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(f.isArrayBufferView(t)||f.isArrayBuffer(t))return t.byteLength;if(f.isURLSearchParams(t)&&(t=t+""),f.isString(t))return(await as(t)).byteLength},ls=async(t,e)=>{const r=f.toFiniteNumber(t.getContentLength());return r??us(e)},fs=He&&(async t=>{let{url:e,method:r,data:n,signal:s,cancelToken:i,timeout:o,onDownloadProgress:a,onUploadProgress:c,responseType:u,headers:l,withCredentials:h="same-origin",fetchOptions:m}=lr(t);u=u?(u+"").toLowerCase():"text";let y=ns([s,i&&i.toAbortSignal()],o),p;const g=y&&y.unsubscribe&&(()=>{y.unsubscribe()});let d;try{if(c&&cs&&r!=="get"&&r!=="head"&&(d=await ls(l,n))!==0){let S=new Request(e,{method:"POST",body:n,duplex:"half"}),D;if(f.isFormData(n)&&(D=S.headers.get("content-type"))&&l.setContentType(D),S.body){const[x,M]=vt(d,Fe(Tt(c)));n=St(S.body,Rt,x,M)}}f.isString(h)||(h=h?"include":"omit");const _="credentials"in Request.prototype;p=new Request(e,{...m,signal:y,method:r.toUpperCase(),headers:l.normalize().toJSON(),body:n,duplex:"half",credentials:_?h:void 0});let v=await fetch(p);const b=et&&(u==="stream"||u==="response");if(et&&(a||b&&g)){const S={};["status","statusText","headers"].forEach(U=>{S[U]=v[U]});const D=f.toFiniteNumber(v.headers.get("content-length")),[x,M]=a&&vt(D,Fe(Tt(a),!0))||[];v=new Response(St(v.body,Rt,x,()=>{M&&M(),g&&g()}),S)}u=u||"text";let O=await Pe[f.findKey(Pe,u)||"text"](v,t);return!b&&g&&g(),await new Promise((S,D)=>{cr(S,D,{data:O,headers:P.from(v.headers),status:v.status,statusText:v.statusText,config:t,request:p})})}catch(_){throw g&&g(),_&&_.name==="TypeError"&&/fetch/i.test(_.message)?Object.assign(new A("Network Error",A.ERR_NETWORK,t,p),{cause:_.cause||_}):A.from(_,_&&_.code,t,p)}}),tt={http:Sn,xhr:rs,fetch:fs};f.forEach(tt,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const xt=t=>`- ${t}`,hs=t=>f.isFunction(t)||t===null||t===!1,dr={getAdapter:t=>{t=f.isArray(t)?t:[t];const{length:e}=t;let r,n;const s={};for(let i=0;i<e;i++){r=t[i];let o;if(n=r,!hs(r)&&(n=tt[(o=String(r)).toLowerCase()],n===void 0))throw new A(`Unknown adapter '${o}'`);if(n)break;s[o||"#"+i]=n}if(!n){const i=Object.entries(s).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(xt).join(`
`):" "+xt(i[0]):"as no adapter specified";throw new A("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:tt};function Ve(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ae(null,t)}function Ot(t){return Ve(t),t.headers=P.from(t.headers),t.data=Qe.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),dr.getAdapter(t.adapter||we.adapter)(t).then(function(n){return Ve(t),n.data=Qe.call(t,t.transformResponse,n),n.headers=P.from(n.headers),n},function(n){return ar(n)||(Ve(t),n&&n.response&&(n.response.data=Qe.call(t,t.transformResponse,n.response),n.response.headers=P.from(n.response.headers))),Promise.reject(n)})}const pr="1.8.2",je={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{je[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const Ft={};je.transitional=function(e,r,n){function s(i,o){return"[Axios v"+pr+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,a)=>{if(e===!1)throw new A(s(o," has been removed"+(r?" in "+r:"")),A.ERR_DEPRECATED);return r&&!Ft[o]&&(Ft[o]=!0,console.warn(s(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(i,o,a):!0}};je.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function ds(t,e,r){if(typeof t!="object")throw new A("options must be an object",A.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let s=n.length;for(;s-- >0;){const i=n[s],o=e[i];if(o){const a=t[i],c=a===void 0||o(a,i,t);if(c!==!0)throw new A("option "+i+" must be "+c,A.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new A("Unknown option "+i,A.ERR_BAD_OPTION)}}const Te={assertOptions:ds,validators:je},q=Te.validators;let re=class{constructor(e){this.defaults=e,this.interceptors={request:new At,response:new At}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=ne(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:i}=r;n!==void 0&&Te.assertOptions(n,{silentJSONParsing:q.transitional(q.boolean),forcedJSONParsing:q.transitional(q.boolean),clarifyTimeoutError:q.transitional(q.boolean)},!1),s!=null&&(f.isFunction(s)?r.paramsSerializer={serialize:s}:Te.assertOptions(s,{encode:q.function,serialize:q.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Te.assertOptions(r,{baseUrl:q.spelling("baseURL"),withXsrfToken:q.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&f.merge(i.common,i[r.method]);i&&f.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),r.headers=P.concat(o,i);const a=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(c=c&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const u=[];this.interceptors.response.forEach(function(g){u.push(g.fulfilled,g.rejected)});let l,h=0,m;if(!c){const p=[Ot.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,u),m=p.length,l=Promise.resolve(r);h<m;)l=l.then(p[h++],p[h++]);return l}m=a.length;let y=r;for(h=0;h<m;){const p=a[h++],g=a[h++];try{y=p(y)}catch(d){g.call(this,d);break}}try{l=Ot.call(this,y)}catch(p){return Promise.reject(p)}for(h=0,m=u.length;h<m;)l=l.then(u[h++],u[h++]);return l}getUri(e){e=ne(this.defaults,e);const r=ur(e.baseURL,e.url,e.allowAbsoluteUrls);return sr(r,e.params,e.paramsSerializer)}};f.forEach(["delete","get","head","options"],function(e){re.prototype[e]=function(r,n){return this.request(ne(n||{},{method:e,url:r,data:(n||{}).data}))}});f.forEach(["post","put","patch"],function(e){function r(n){return function(i,o,a){return this.request(ne(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}re.prototype[e]=r(),re.prototype[e+"Form"]=r(!0)});let ps=class mr{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{n.subscribe(a),i=a}).then(s);return o.cancel=function(){n.unsubscribe(i)},o},e(function(i,o,a){n.reason||(n.reason=new ae(i,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new mr(function(s){e=s}),cancel:e}}};function ms(t){return function(r){return t.apply(null,r)}}function ys(t){return f.isObject(t)&&t.isAxiosError===!0}const rt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(rt).forEach(([t,e])=>{rt[e]=t});function yr(t){const e=new re(t),r=Vt(re.prototype.request,e);return f.extend(r,re.prototype,e,{allOwnKeys:!0}),f.extend(r,e,null,{allOwnKeys:!0}),r.create=function(s){return yr(ne(t,s))},r}const C=yr(we);C.Axios=re;C.CanceledError=ae;C.CancelToken=ps;C.isCancel=ar;C.VERSION=pr;C.toFormData=Ue;C.AxiosError=A;C.Cancel=C.CanceledError;C.all=function(e){return Promise.all(e)};C.spread=ms;C.isAxiosError=ys;C.mergeConfig=ne;C.AxiosHeaders=P;C.formToJSON=t=>or(f.isHTMLForm(t)?new FormData(t):t);C.getAdapter=dr.getAdapter;C.HttpStatusCode=rt;C.default=C;const{Axios:Di,AxiosError:$i,CanceledError:Ui,isCancel:Hi,CancelToken:ji,VERSION:zi,all:qi,Cancel:Wi,isAxiosError:Qi,spread:Vi,toFormData:Ji,AxiosHeaders:Ki,HttpStatusCode:Xi,formToJSON:Yi,getAdapter:Gi,mergeConfig:Zi}=C,gr="https://api.weather.gov",wr=C.create({headers:{"User-Agent":"(Smart Weather & Fire Risk Monitor, contact@example.com)"}});async function dt(t,e=3,r=1e3){var n;try{return await t()}catch(s){if(e===0)throw s;const i=((n=s.response)==null?void 0:n.status)===429?parseInt(s.response.headers["retry-after"]||"30")*1e3:r;return await new Promise(o=>setTimeout(o,i)),dt(t,e-1,r*2)}}async function Ee(t,e,r){return dt(async()=>{var n,s,i;try{const a=(await wr.get(`${gr}/gridpoints/${t}/${e},${r}/forecast`)).data.properties.periods[0];return{temperature:Number(a.temperature),relativeHumidity:Number(((n=a.relativeHumidity)==null?void 0:n.value)||0),windSpeed:Number(a.windSpeed.split(" ")[0]),precipitation:Number(((s=a.probabilityOfPrecipitation)==null?void 0:s.value)||0),shortForecast:a.shortForecast,detailedForecast:a.detailedForecast,name:a.name,startTime:a.startTime,isDaytime:a.isDaytime}}catch(o){throw console.error("Weather API Error:",((i=o.response)==null?void 0:i.data)||o.message),new Error("Failed to fetch weather data")}})}async function ze(t,e){return dt(async()=>{var r;try{return await wr.get(`${gr}/points/${t},${e}`)}catch(n){throw console.error("Grid API Error:",((r=n.response)==null?void 0:r.data)||n.message),n}})}function J(t){return Array.isArray?Array.isArray(t):Ar(t)==="[object Array]"}function gs(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function ws(t){return t==null?"":gs(t)}function W(t){return typeof t=="string"}function Er(t){return typeof t=="number"}function Es(t){return t===!0||t===!1||bs(t)&&Ar(t)=="[object Boolean]"}function br(t){return typeof t=="object"}function bs(t){return br(t)&&t!==null}function I(t){return t!=null}function Je(t){return!t.trim().length}function Ar(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const As="Incorrect 'index' type",_s=t=>`Invalid value for key ${t}`,vs=t=>`Pattern length exceeds max of ${t}.`,Ts=t=>`Missing ${t} property in key`,Cs=t=>`Property 'weight' in key '${t}' must be a positive integer`,Pt=Object.prototype.hasOwnProperty;class Ss{constructor(e){this._keys=[],this._keyMap={};let r=0;e.forEach(n=>{let s=_r(n);this._keys.push(s),this._keyMap[s.id]=s,r+=s.weight}),this._keys.forEach(n=>{n.weight/=r})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function _r(t){let e=null,r=null,n=null,s=1,i=null;if(W(t)||J(t))n=t,e=Mt(t),r=nt(t);else{if(!Pt.call(t,"name"))throw new Error(Ts("name"));const o=t.name;if(n=o,Pt.call(t,"weight")&&(s=t.weight,s<=0))throw new Error(Cs(o));e=Mt(o),r=nt(o),i=t.getFn}return{path:e,id:r,weight:s,src:n,getFn:i}}function Mt(t){return J(t)?t:t.split(".")}function nt(t){return J(t)?t.join("."):t}function Rs(t,e){let r=[],n=!1;const s=(i,o,a)=>{if(I(i))if(!o[a])r.push(i);else{let c=o[a];const u=i[c];if(!I(u))return;if(a===o.length-1&&(W(u)||Er(u)||Es(u)))r.push(ws(u));else if(J(u)){n=!0;for(let l=0,h=u.length;l<h;l+=1)s(u[l],o,a+1)}else o.length&&s(u,o,a+1)}};return s(t,W(e)?e.split("."):e,0),n?r:r[0]}const xs={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Os={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},Fs={location:0,threshold:.6,distance:100},Ps={useExtendedSearch:!1,getFn:Rs,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var E={...Os,...xs,...Fs,...Ps};const Ms=/[^ ]+/g;function Bs(t=1,e=3){const r=new Map,n=Math.pow(10,e);return{get(s){const i=s.match(Ms).length;if(r.has(i))return r.get(i);const o=1/Math.pow(i,.5*t),a=parseFloat(Math.round(o*n)/n);return r.set(i,a),a},clear(){r.clear()}}}class pt{constructor({getFn:e=E.getFn,fieldNormWeight:r=E.fieldNormWeight}={}){this.norm=Bs(r,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((r,n)=>{this._keysMap[r.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,W(this.docs[0])?this.docs.forEach((e,r)=>{this._addString(e,r)}):this.docs.forEach((e,r)=>{this._addObject(e,r)}),this.norm.clear())}add(e){const r=this.size();W(e)?this._addString(e,r):this._addObject(e,r)}removeAt(e){this.records.splice(e,1);for(let r=e,n=this.size();r<n;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(e,r){return e[this._keysMap[r]]}size(){return this.records.length}_addString(e,r){if(!I(e)||Je(e))return;let n={v:e,i:r,n:this.norm.get(e)};this.records.push(n)}_addObject(e,r){let n={i:r,$:{}};this.keys.forEach((s,i)=>{let o=s.getFn?s.getFn(e):this.getFn(e,s.path);if(I(o)){if(J(o)){let a=[];const c=[{nestedArrIndex:-1,value:o}];for(;c.length;){const{nestedArrIndex:u,value:l}=c.pop();if(I(l))if(W(l)&&!Je(l)){let h={v:l,i:u,n:this.norm.get(l)};a.push(h)}else J(l)&&l.forEach((h,m)=>{c.push({nestedArrIndex:m,value:h})})}n.$[i]=a}else if(W(o)&&!Je(o)){let a={v:o,n:this.norm.get(o)};n.$[i]=a}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function vr(t,e,{getFn:r=E.getFn,fieldNormWeight:n=E.fieldNormWeight}={}){const s=new pt({getFn:r,fieldNormWeight:n});return s.setKeys(t.map(_r)),s.setSources(e),s.create(),s}function Ns(t,{getFn:e=E.getFn,fieldNormWeight:r=E.fieldNormWeight}={}){const{keys:n,records:s}=t,i=new pt({getFn:e,fieldNormWeight:r});return i.setKeys(n),i.setIndexRecords(s),i}function Ae(t,{errors:e=0,currentLocation:r=0,expectedLocation:n=0,distance:s=E.distance,ignoreLocation:i=E.ignoreLocation}={}){const o=e/t.length;if(i)return o;const a=Math.abs(n-r);return s?o+a/s:a?1:o}function Ls(t=[],e=E.minMatchCharLength){let r=[],n=-1,s=-1,i=0;for(let o=t.length;i<o;i+=1){let a=t[i];a&&n===-1?n=i:!a&&n!==-1&&(s=i-1,s-n+1>=e&&r.push([n,s]),n=-1)}return t[i-1]&&i-n>=e&&r.push([n,i-1]),r}const Z=32;function Is(t,e,r,{location:n=E.location,distance:s=E.distance,threshold:i=E.threshold,findAllMatches:o=E.findAllMatches,minMatchCharLength:a=E.minMatchCharLength,includeMatches:c=E.includeMatches,ignoreLocation:u=E.ignoreLocation}={}){if(e.length>Z)throw new Error(vs(Z));const l=e.length,h=t.length,m=Math.max(0,Math.min(n,h));let y=i,p=m;const g=a>1||c,d=g?Array(h):[];let _;for(;(_=t.indexOf(e,p))>-1;){let x=Ae(e,{currentLocation:_,expectedLocation:m,distance:s,ignoreLocation:u});if(y=Math.min(x,y),p=_+l,g){let M=0;for(;M<l;)d[_+M]=1,M+=1}}p=-1;let v=[],b=1,O=l+h;const S=1<<l-1;for(let x=0;x<l;x+=1){let M=0,U=O;for(;M<U;)Ae(e,{errors:x,currentLocation:m+U,expectedLocation:m,distance:s,ignoreLocation:u})<=y?M=U:O=U,U=Math.floor((O-M)/2+M);O=U;let yt=Math.max(1,m-U+1),qe=o?h:Math.min(m+U,h)+l,se=Array(qe+2);se[qe+1]=(1<<x)-1;for(let H=qe;H>=yt;H-=1){let be=H-1,gt=r[t.charAt(be)];if(g&&(d[be]=+!!gt),se[H]=(se[H+1]<<1|1)&gt,x&&(se[H]|=(v[H+1]|v[H])<<1|1|v[H+1]),se[H]&S&&(b=Ae(e,{errors:x,currentLocation:be,expectedLocation:m,distance:s,ignoreLocation:u}),b<=y)){if(y=b,p=be,p<=m)break;yt=Math.max(1,2*m-p)}}if(Ae(e,{errors:x+1,currentLocation:m,expectedLocation:m,distance:s,ignoreLocation:u})>y)break;v=se}const D={isMatch:p>=0,score:Math.max(.001,b)};if(g){const x=Ls(d,a);x.length?c&&(D.indices=x):D.isMatch=!1}return D}function ks(t){let e={};for(let r=0,n=t.length;r<n;r+=1){const s=t.charAt(r);e[s]=(e[s]||0)|1<<n-r-1}return e}const Me=String.prototype.normalize?t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):t=>t;class Tr{constructor(e,{location:r=E.location,threshold:n=E.threshold,distance:s=E.distance,includeMatches:i=E.includeMatches,findAllMatches:o=E.findAllMatches,minMatchCharLength:a=E.minMatchCharLength,isCaseSensitive:c=E.isCaseSensitive,ignoreDiacritics:u=E.ignoreDiacritics,ignoreLocation:l=E.ignoreLocation}={}){if(this.options={location:r,threshold:n,distance:s,includeMatches:i,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:l},e=c?e:e.toLowerCase(),e=u?Me(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const h=(y,p)=>{this.chunks.push({pattern:y,alphabet:ks(y),startIndex:p})},m=this.pattern.length;if(m>Z){let y=0;const p=m%Z,g=m-p;for(;y<g;)h(this.pattern.substr(y,Z),y),y+=Z;if(p){const d=m-Z;h(this.pattern.substr(d),d)}}else h(this.pattern,0)}searchIn(e){const{isCaseSensitive:r,ignoreDiacritics:n,includeMatches:s}=this.options;if(e=r?e:e.toLowerCase(),e=n?Me(e):e,this.pattern===e){let g={isMatch:!0,score:0};return s&&(g.indices=[[0,e.length-1]]),g}const{location:i,distance:o,threshold:a,findAllMatches:c,minMatchCharLength:u,ignoreLocation:l}=this.options;let h=[],m=0,y=!1;this.chunks.forEach(({pattern:g,alphabet:d,startIndex:_})=>{const{isMatch:v,score:b,indices:O}=Is(e,g,d,{location:i+_,distance:o,threshold:a,findAllMatches:c,minMatchCharLength:u,includeMatches:s,ignoreLocation:l});v&&(y=!0),m+=b,v&&O&&(h=[...h,...O])});let p={isMatch:y,score:y?m/this.chunks.length:1};return y&&s&&(p.indices=h),p}}class Y{constructor(e){this.pattern=e}static isMultiMatch(e){return Bt(e,this.multiRegex)}static isSingleMatch(e){return Bt(e,this.singleRegex)}search(){}}function Bt(t,e){const r=t.match(e);return r?r[1]:null}class Ds extends Y{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const r=e===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class $s extends Y{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const n=e.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class Us extends Y{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const r=e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class Hs extends Y{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const r=!e.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class js extends Y{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const r=e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class zs extends Y{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const r=!e.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class Cr extends Y{constructor(e,{location:r=E.location,threshold:n=E.threshold,distance:s=E.distance,includeMatches:i=E.includeMatches,findAllMatches:o=E.findAllMatches,minMatchCharLength:a=E.minMatchCharLength,isCaseSensitive:c=E.isCaseSensitive,ignoreDiacritics:u=E.ignoreDiacritics,ignoreLocation:l=E.ignoreLocation}={}){super(e),this._bitapSearch=new Tr(e,{location:r,threshold:n,distance:s,includeMatches:i,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:c,ignoreDiacritics:u,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Sr extends Y{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let r=0,n;const s=[],i=this.pattern.length;for(;(n=e.indexOf(this.pattern,r))>-1;)r=n+i,s.push([n,r-1]);const o=!!s.length;return{isMatch:o,score:o?0:1,indices:s}}}const st=[Ds,Sr,Us,Hs,zs,js,$s,Cr],Nt=st.length,qs=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Ws="|";function Qs(t,e={}){return t.split(Ws).map(r=>{let n=r.trim().split(qs).filter(i=>i&&!!i.trim()),s=[];for(let i=0,o=n.length;i<o;i+=1){const a=n[i];let c=!1,u=-1;for(;!c&&++u<Nt;){const l=st[u];let h=l.isMultiMatch(a);h&&(s.push(new l(h,e)),c=!0)}if(!c)for(u=-1;++u<Nt;){const l=st[u];let h=l.isSingleMatch(a);if(h){s.push(new l(h,e));break}}}return s})}const Vs=new Set([Cr.type,Sr.type]);class Js{constructor(e,{isCaseSensitive:r=E.isCaseSensitive,ignoreDiacritics:n=E.ignoreDiacritics,includeMatches:s=E.includeMatches,minMatchCharLength:i=E.minMatchCharLength,ignoreLocation:o=E.ignoreLocation,findAllMatches:a=E.findAllMatches,location:c=E.location,threshold:u=E.threshold,distance:l=E.distance}={}){this.query=null,this.options={isCaseSensitive:r,ignoreDiacritics:n,includeMatches:s,minMatchCharLength:i,findAllMatches:a,ignoreLocation:o,location:c,threshold:u,distance:l},e=r?e:e.toLowerCase(),e=n?Me(e):e,this.pattern=e,this.query=Qs(this.pattern,this.options)}static condition(e,r){return r.useExtendedSearch}searchIn(e){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:s,ignoreDiacritics:i}=this.options;e=s?e:e.toLowerCase(),e=i?Me(e):e;let o=0,a=[],c=0;for(let u=0,l=r.length;u<l;u+=1){const h=r[u];a.length=0,o=0;for(let m=0,y=h.length;m<y;m+=1){const p=h[m],{isMatch:g,indices:d,score:_}=p.search(e);if(g){if(o+=1,c+=_,n){const v=p.constructor.type;Vs.has(v)?a=[...a,...d]:a.push(d)}}else{c=0,o=0,a.length=0;break}}if(o){let m={isMatch:!0,score:c/o};return n&&(m.indices=a),m}}return{isMatch:!1,score:1}}}const it=[];function Ks(...t){it.push(...t)}function ot(t,e){for(let r=0,n=it.length;r<n;r+=1){let s=it[r];if(s.condition(t,e))return new s(t,e)}return new Tr(t,e)}const Be={AND:"$and",OR:"$or"},at={PATH:"$path",PATTERN:"$val"},ct=t=>!!(t[Be.AND]||t[Be.OR]),Xs=t=>!!t[at.PATH],Ys=t=>!J(t)&&br(t)&&!ct(t),Lt=t=>({[Be.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function Rr(t,e,{auto:r=!0}={}){const n=s=>{let i=Object.keys(s);const o=Xs(s);if(!o&&i.length>1&&!ct(s))return n(Lt(s));if(Ys(s)){const c=o?s[at.PATH]:i[0],u=o?s[at.PATTERN]:s[c];if(!W(u))throw new Error(_s(c));const l={keyId:nt(c),pattern:u};return r&&(l.searcher=ot(u,e)),l}let a={children:[],operator:i[0]};return i.forEach(c=>{const u=s[c];J(u)&&u.forEach(l=>{a.children.push(n(l))})}),a};return ct(t)||(t=Lt(t)),n(t)}function Gs(t,{ignoreFieldNorm:e=E.ignoreFieldNorm}){t.forEach(r=>{let n=1;r.matches.forEach(({key:s,norm:i,score:o})=>{const a=s?s.weight:null;n*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(e?1:i))}),r.score=n})}function Zs(t,e){const r=t.matches;e.matches=[],I(r)&&r.forEach(n=>{if(!I(n.indices)||!n.indices.length)return;const{indices:s,value:i}=n;let o={indices:s,value:i};n.key&&(o.key=n.key.src),n.idx>-1&&(o.refIndex=n.idx),e.matches.push(o)})}function ei(t,e){e.score=t.score}function ti(t,e,{includeMatches:r=E.includeMatches,includeScore:n=E.includeScore}={}){const s=[];return r&&s.push(Zs),n&&s.push(ei),t.map(i=>{const{idx:o}=i,a={item:e[o],refIndex:o};return s.length&&s.forEach(c=>{c(i,a)}),a})}class ce{constructor(e,r={},n){this.options={...E,...r},this.options.useExtendedSearch,this._keyStore=new Ss(this.options.keys),this.setCollection(e,n)}setCollection(e,r){if(this._docs=e,r&&!(r instanceof pt))throw new Error(As);this._myIndex=r||vr(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){I(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const r=[];for(let n=0,s=this._docs.length;n<s;n+=1){const i=this._docs[n];e(i,n)&&(this.removeAt(n),n-=1,s-=1,r.push(i))}return r}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:r=-1}={}){const{includeMatches:n,includeScore:s,shouldSort:i,sortFn:o,ignoreFieldNorm:a}=this.options;let c=W(e)?W(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Gs(c,{ignoreFieldNorm:a}),i&&c.sort(o),Er(r)&&r>-1&&(c=c.slice(0,r)),ti(c,this._docs,{includeMatches:n,includeScore:s})}_searchStringList(e){const r=ot(e,this.options),{records:n}=this._myIndex,s=[];return n.forEach(({v:i,i:o,n:a})=>{if(!I(i))return;const{isMatch:c,score:u,indices:l}=r.searchIn(i);c&&s.push({item:i,idx:o,matches:[{score:u,value:i,norm:a,indices:l}]})}),s}_searchLogical(e){const r=Rr(e,this.options),n=(a,c,u)=>{if(!a.children){const{keyId:h,searcher:m}=a,y=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(c,h),searcher:m});return y&&y.length?[{idx:u,item:c,matches:y}]:[]}const l=[];for(let h=0,m=a.children.length;h<m;h+=1){const y=a.children[h],p=n(y,c,u);if(p.length)l.push(...p);else if(a.operator===Be.AND)return[]}return l},s=this._myIndex.records,i={},o=[];return s.forEach(({$:a,i:c})=>{if(I(a)){let u=n(r,a,c);u.length&&(i[c]||(i[c]={idx:c,item:a,matches:[]},o.push(i[c])),u.forEach(({matches:l})=>{i[c].matches.push(...l)}))}}),o}_searchObjectList(e){const r=ot(e,this.options),{keys:n,records:s}=this._myIndex,i=[];return s.forEach(({$:o,i:a})=>{if(!I(o))return;let c=[];n.forEach((u,l)=>{c.push(...this._findMatches({key:u,value:o[l],searcher:r}))}),c.length&&i.push({idx:a,item:o,matches:c})}),i}_findMatches({key:e,value:r,searcher:n}){if(!I(r))return[];let s=[];if(J(r))r.forEach(({v:i,i:o,n:a})=>{if(!I(i))return;const{isMatch:c,score:u,indices:l}=n.searchIn(i);c&&s.push({score:u,key:e,value:i,idx:o,norm:a,indices:l})});else{const{v:i,n:o}=r,{isMatch:a,score:c,indices:u}=n.searchIn(i);a&&s.push({score:c,key:e,value:i,norm:o,indices:u})}return s}}ce.version="7.1.0";ce.createIndex=vr;ce.parseIndex=Ns;ce.config=E;ce.parseQuery=Rr;Ks(Js);const ri="https://nominatim.openstreetmap.org/search",ni=C.create({headers:{"User-Agent":"SmartWeatherMonitor/1.0","Accept-Language":"en-US,en;q=0.9"},timeout:1e4}),It={lastRequest:0,async throttle(){const e=Date.now()-this.lastRequest;e<1e3&&await new Promise(r=>setTimeout(r,1e3-e)),this.lastRequest=Date.now()}};function si(t){return new ce(t,{keys:["name"],threshold:.3,distance:100,includeScore:!0})}async function ii(t){try{await It.throttle();const e=t.trim().replace(/[^\w\s,-]/g,""),r=await ni.get(ri,{params:{q:e,format:"jsonv2",addressdetails:1,limit:50,countrycodes:"us","accept-language":"en",featuretype:["city","town","village","suburb","neighbourhood"].join(",")}});if(!r.data||!Array.isArray(r.data))return[];const n=r.data.filter(a=>a.address&&a.address.country==="United States"&&(a.address.city||a.address.town||a.address.village||a.address.suburb)).map(a=>({name:a.address.city||a.address.town||a.address.village||a.address.suburb,state:a.address.state,lat:Number(a.lat),lon:Number(a.lon),place:a})),i=si(n).search(e).slice(0,5).map(a=>a.item);return(await Promise.all(i.map(async a=>{try{if(await It.throttle(),isNaN(a.lat)||isNaN(a.lon))return null;const c=await ze(a.lat,a.lon),{gridX:u,gridY:l,gridId:h}=c.data.properties;return{value:{office:h,gridX:u,gridY:l},label:`${a.name}, ${a.state}`,coordinates:`${a.lat.toFixed(4)} N, ${a.lon.toFixed(4)} W`,lat:a.lat,lon:a.lon}}catch(c){return console.warn("Failed to process city data:",c.message),null}}))).filter(Boolean)}catch(e){return console.error("City search error:",e.message),[]}}function xr(t){const e=[];let r=0;t.temperature>100?(r+=4,e.push("Dangerous high temperature")):t.temperature>90?(r+=3,e.push("Very high temperature")):t.temperature>80?(r+=2,e.push("High temperature")):t.temperature>70&&(r+=1,e.push("Moderate temperature")),t.relativeHumidity<15?(r+=3,e.push("Critically low humidity")):t.relativeHumidity<25?(r+=2,e.push("Very low humidity")):t.relativeHumidity<35&&(r+=1,e.push("Low humidity")),t.windSpeed>30?(r+=3,e.push("Extreme wind speeds")):t.windSpeed>20?(r+=2,e.push("Strong winds")):t.windSpeed>10&&(r+=1,e.push("Moderate winds")),t.precipitation>=80?(r-=3,e.push("Very high precipitation chance (reducing risk)")):t.precipitation>=60?(r-=2,e.push("High precipitation chance (reducing risk)")):t.precipitation>=40?(r-=1,e.push("Moderate precipitation chance (reducing risk)")):t.precipitation<20&&(r+=1,e.push("Very low precipitation chance")),t.temperature>90&&t.relativeHumidity<20&&t.windSpeed>15&&(r+=2,e.push("Multiple high-risk conditions present")),t.temperature>85&&t.precipitation<10&&(r+=1,e.push("Hot and dry conditions")),r=Math.max(0,Math.min(10,r));let n;return r>=8?n="Extreme":r>=6?n="High":r>=3?n="Moderate":n="Low",{riskLevel:n,score:r,factors:e}}function Or(t){switch(t){case"Low":return"#22c55e";case"Moderate":return"#eab308";case"High":return"#f97316";case"Extreme":return"#ef4444";default:return"#6b7280"}}let ee=null;function oi(t,e){ee&&ee.remove(),ee=L.map("map-container").setView([t,e],8),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors"}).addTo(ee),L.tileLayer("https://tilecache.rainviewer.com/v2/radar/nowcast/{z}/{x}/{y}/256/2/1_1/rgb/5/1_1.png",{opacity:.6}).addTo(ee)}function Ne(t,e){ee?ee.setView([t,e],8):oi(t,e)}function Fr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Pr={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,u,l){this.fn=c,this.context=u,this.once=l||!1}function i(c,u,l,h,m){if(typeof l!="function")throw new TypeError("The listener must be a function");var y=new s(l,h||c,m),p=r?r+u:u;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],y]:c._events[p].push(y):(c._events[p]=y,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],l,h;if(this._eventsCount===0)return u;for(h in l=this._events)e.call(l,h)&&u.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(l)):u},a.prototype.listeners=function(u){var l=r?r+u:u,h=this._events[l];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,y=h.length,p=new Array(y);m<y;m++)p[m]=h[m].fn;return p},a.prototype.listenerCount=function(u){var l=r?r+u:u,h=this._events[l];return h?h.fn?1:h.length:0},a.prototype.emit=function(u,l,h,m,y,p){var g=r?r+u:u;if(!this._events[g])return!1;var d=this._events[g],_=arguments.length,v,b;if(d.fn){switch(d.once&&this.removeListener(u,d.fn,void 0,!0),_){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,l),!0;case 3:return d.fn.call(d.context,l,h),!0;case 4:return d.fn.call(d.context,l,h,m),!0;case 5:return d.fn.call(d.context,l,h,m,y),!0;case 6:return d.fn.call(d.context,l,h,m,y,p),!0}for(b=1,v=new Array(_-1);b<_;b++)v[b-1]=arguments[b];d.fn.apply(d.context,v)}else{var O=d.length,S;for(b=0;b<O;b++)switch(d[b].once&&this.removeListener(u,d[b].fn,void 0,!0),_){case 1:d[b].fn.call(d[b].context);break;case 2:d[b].fn.call(d[b].context,l);break;case 3:d[b].fn.call(d[b].context,l,h);break;case 4:d[b].fn.call(d[b].context,l,h,m);break;default:if(!v)for(S=1,v=new Array(_-1);S<_;S++)v[S-1]=arguments[S];d[b].fn.apply(d[b].context,v)}}return!0},a.prototype.on=function(u,l,h){return i(this,u,l,h,!1)},a.prototype.once=function(u,l,h){return i(this,u,l,h,!0)},a.prototype.removeListener=function(u,l,h,m){var y=r?r+u:u;if(!this._events[y])return this;if(!l)return o(this,y),this;var p=this._events[y];if(p.fn)p.fn===l&&(!m||p.once)&&(!h||p.context===h)&&o(this,y);else{for(var g=0,d=[],_=p.length;g<_;g++)(p[g].fn!==l||m&&!p[g].once||h&&p[g].context!==h)&&d.push(p[g]);d.length?this._events[y]=d.length===1?d[0]:d:o(this,y)}return this},a.prototype.removeAllListeners=function(u){var l;return u?(l=r?r+u:u,this._events[l]&&o(this,l)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a})(Pr);var ai=Pr.exports;const ci=Fr(ai);class Mr extends Error{constructor(e){super(e),this.name="TimeoutError"}}let ui=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}};const kt=t=>globalThis.DOMException===void 0?new ui(t):new DOMException(t),Dt=t=>{const e=t.reason===void 0?kt("This operation was aborted."):t.reason;return e instanceof Error?e:kt(e)};function li(t,e,r,n){let s;const i=new Promise((o,a)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e===Number.POSITIVE_INFINITY){o(t);return}if(n={customTimers:{setTimeout,clearTimeout},...n},n.signal){const{signal:c}=n;c.aborted&&a(Dt(c)),c.addEventListener("abort",()=>{a(Dt(c))})}s=n.customTimers.setTimeout.call(void 0,()=>{const c=`Promise timed out after ${e} milliseconds`,u=r instanceof Error?r:new Mr(c);typeof t.cancel=="function"&&t.cancel(),a(u)},e),(async()=>{try{o(await t)}catch(c){a(c)}finally{n.customTimers.clearTimeout.call(void 0,s)}})()});return i.clear=()=>{clearTimeout(s),s=void 0},i}function fi(t,e,r){let n=0,s=t.length;for(;s>0;){const i=Math.trunc(s/2);let o=n+i;r(t[o],e)<=0?(n=++o,s-=i+1):s=i}return n}var G=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},V;class hi{constructor(){V.set(this,[])}enqueue(e,r){r={priority:0,...r};const n={priority:r.priority,run:e};if(this.size&&G(this,V,"f")[this.size-1].priority>=r.priority){G(this,V,"f").push(n);return}const s=fi(G(this,V,"f"),n,(i,o)=>o.priority-i.priority);G(this,V,"f").splice(s,0,n)}dequeue(){const e=G(this,V,"f").shift();return e==null?void 0:e.run}filter(e){return G(this,V,"f").filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return G(this,V,"f").length}}V=new WeakMap;var T=function(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r},w=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},R,fe,he,X,Le,de,Ce,j,le,B,Se,N,pe,K,Re,$t,Ut,Br,Ht,jt,xe,Ke,Xe,Ie,Nr,Oe;let Lr=class extends Error{};class Ir extends ci{constructor(e){var r,n,s,i;if(super(),R.add(this),fe.set(this,void 0),he.set(this,void 0),X.set(this,0),Le.set(this,void 0),de.set(this,void 0),Ce.set(this,0),j.set(this,void 0),le.set(this,void 0),B.set(this,void 0),Se.set(this,void 0),N.set(this,0),pe.set(this,void 0),K.set(this,void 0),Re.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:hi,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=e.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(i=(s=e.interval)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""}\` (${typeof e.interval})`);T(this,fe,e.carryoverConcurrencyCount,"f"),T(this,he,e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,"f"),T(this,Le,e.intervalCap,"f"),T(this,de,e.interval,"f"),T(this,B,new e.queueClass,"f"),T(this,Se,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,T(this,Re,e.throwOnTimeout===!0,"f"),T(this,K,e.autoStart===!1,"f")}get concurrency(){return w(this,pe,"f")}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);T(this,pe,e,"f"),w(this,R,"m",Ie).call(this)}async add(e,r={}){return r={timeout:this.timeout,throwOnTimeout:w(this,Re,"f"),...r},new Promise((n,s)=>{w(this,B,"f").enqueue(async()=>{var i,o,a;T(this,N,(o=w(this,N,"f"),o++,o),"f"),T(this,X,(a=w(this,X,"f"),a++,a),"f");try{if(!((i=r.signal)===null||i===void 0)&&i.aborted)throw new Lr("The task was aborted.");let c=e({signal:r.signal});r.timeout&&(c=li(Promise.resolve(c),r.timeout)),r.signal&&(c=Promise.race([c,w(this,R,"m",Nr).call(this,r.signal)]));const u=await c;n(u),this.emit("completed",u)}catch(c){if(c instanceof Mr&&!r.throwOnTimeout){n();return}s(c),this.emit("error",c)}finally{w(this,R,"m",Br).call(this)}},r),this.emit("add"),w(this,R,"m",xe).call(this)})}async addAll(e,r){return Promise.all(e.map(async n=>this.add(n,r)))}start(){return w(this,K,"f")?(T(this,K,!1,"f"),w(this,R,"m",Ie).call(this),this):this}pause(){T(this,K,!0,"f")}clear(){T(this,B,new(w(this,Se,"f")),"f")}async onEmpty(){w(this,B,"f").size!==0&&await w(this,R,"m",Oe).call(this,"empty")}async onSizeLessThan(e){w(this,B,"f").size<e||await w(this,R,"m",Oe).call(this,"next",()=>w(this,B,"f").size<e)}async onIdle(){w(this,N,"f")===0&&w(this,B,"f").size===0||await w(this,R,"m",Oe).call(this,"idle")}get size(){return w(this,B,"f").size}sizeBy(e){return w(this,B,"f").filter(e).length}get pending(){return w(this,N,"f")}get isPaused(){return w(this,K,"f")}}fe=new WeakMap,he=new WeakMap,X=new WeakMap,Le=new WeakMap,de=new WeakMap,Ce=new WeakMap,j=new WeakMap,le=new WeakMap,B=new WeakMap,Se=new WeakMap,N=new WeakMap,pe=new WeakMap,K=new WeakMap,Re=new WeakMap,R=new WeakSet,$t=function(){return w(this,he,"f")||w(this,X,"f")<w(this,Le,"f")},Ut=function(){return w(this,N,"f")<w(this,pe,"f")},Br=function(){var e;T(this,N,(e=w(this,N,"f"),e--,e),"f"),w(this,R,"m",xe).call(this),this.emit("next")},Ht=function(){w(this,R,"m",Xe).call(this),w(this,R,"m",Ke).call(this),T(this,le,void 0,"f")},jt=function(){const e=Date.now();if(w(this,j,"f")===void 0){const r=w(this,Ce,"f")-e;if(r<0)T(this,X,w(this,fe,"f")?w(this,N,"f"):0,"f");else return w(this,le,"f")===void 0&&T(this,le,setTimeout(()=>{w(this,R,"m",Ht).call(this)},r),"f"),!0}return!1},xe=function(){if(w(this,B,"f").size===0)return w(this,j,"f")&&clearInterval(w(this,j,"f")),T(this,j,void 0,"f"),this.emit("empty"),w(this,N,"f")===0&&this.emit("idle"),!1;if(!w(this,K,"f")){const e=!w(this,R,"a",jt);if(w(this,R,"a",$t)&&w(this,R,"a",Ut)){const r=w(this,B,"f").dequeue();return r?(this.emit("active"),r(),e&&w(this,R,"m",Ke).call(this),!0):!1}}return!1},Ke=function(){w(this,he,"f")||w(this,j,"f")!==void 0||(T(this,j,setInterval(()=>{w(this,R,"m",Xe).call(this)},w(this,de,"f")),"f"),T(this,Ce,Date.now()+w(this,de,"f"),"f"))},Xe=function(){w(this,X,"f")===0&&w(this,N,"f")===0&&w(this,j,"f")&&(clearInterval(w(this,j,"f")),T(this,j,void 0,"f")),T(this,X,w(this,fe,"f")?w(this,N,"f"):0,"f"),w(this,R,"m",Ie).call(this)},Ie=function(){for(;w(this,R,"m",xe).call(this););},Nr=async function(e){return new Promise((r,n)=>{e.addEventListener("abort",()=>{n(new Lr("The task was aborted."))},{once:!0})})},Oe=async function(e,r){return new Promise(n=>{const s=()=>{r&&!r()||(this.off(e,s),n())};this.on(e,s)})};var kr={};function $(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var di=$;$.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};$.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};$.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r),this._options.unref&&this._timer.unref(),!0};$.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};$.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};$.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};$.prototype.start=$.prototype.try;$.prototype.errors=function(){return this._errors};$.prototype.attempts=function(){return this._attempts};$.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,r=0,n=0;n<this._errors.length;n++){var s=this._errors[n],i=s.message,o=(t[i]||0)+1;t[i]=o,o>=r&&(e=s,r=o)}return e};(function(t){var e=di;t.operation=function(r){var n=t.timeouts(r);return new e(n,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},t.timeouts=function(r){if(r instanceof Array)return[].concat(r);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var s in r)n[s]=r[s];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var i=[],o=0;o<n.retries;o++)i.push(this.createTimeout(o,n));return r&&r.forever&&!i.length&&i.push(this.createTimeout(o,n)),i.sort(function(a,c){return a-c}),i},t.createTimeout=function(r,n){var s=n.randomize?Math.random()+1:1,i=Math.round(s*Math.max(n.minTimeout,1)*Math.pow(n.factor,r));return i=Math.min(i,n.maxTimeout),i},t.wrap=function(r,n,s){if(n instanceof Array&&(s=n,n=null),!s){s=[];for(var i in r)typeof r[i]=="function"&&s.push(i)}for(var o=0;o<s.length;o++){var a=s[o],c=r[a];r[a]=(function(l){var h=t.operation(n),m=Array.prototype.slice.call(arguments,1),y=m.pop();m.push(function(p){h.retry(p)||(p&&(arguments[0]=h.mainError()),y.apply(this,arguments))}),h.attempt(function(){l.apply(r,m)})}).bind(r,c),r[a].options=n}}})(kr);var pi=kr;const mi=Fr(pi),yi=Object.prototype.toString,gi=t=>yi.call(t)==="[object Error]",wi=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed","fetch failed","terminated"]);function Ei(t){return t&&gi(t)&&t.name==="TypeError"&&typeof t.message=="string"?t.message==="Load failed"?t.stack===void 0:wi.has(t.message):!1}class bi extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const zt=(t,e,r)=>{const n=r.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=n,t};async function ut(t,e){return new Promise((r,n)=>{e={...e},e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.retries??(e.retries=10);const s=mi.operation(e),i=()=>{var a;s.stop(),n((a=e.signal)==null?void 0:a.reason)};e.signal&&!e.signal.aborted&&e.signal.addEventListener("abort",i,{once:!0});const o=()=>{var a;(a=e.signal)==null||a.removeEventListener("abort",i),s.stop()};s.attempt(async a=>{try{const c=await t(a);o(),r(c)}catch(c){try{if(!(c instanceof Error))throw new TypeError(`Non-error was thrown: "${c}". You should only throw errors.`);if(c instanceof bi)throw c.originalError;if(c instanceof TypeError&&!Ei(c))throw c;if(zt(c,a,e),await e.shouldRetry(c)||(s.stop(),n(c)),await e.onFailedAttempt(c),!s.retry(c))throw s.mainError()}catch(u){zt(u,a,e),o(),n(u)}}})})}const Ai="https://nominatim.openstreetmap.org/search",_i=5,ye=15*60*1e3,qt=2,vi=2e3,Ti=["Texas","Arizona","New Mexico"],ie=new Map,Ci=new Ir({concurrency:1,interval:1500,intervalCap:1}),Si=new Ir({concurrency:1,interval:1e3,intervalCap:1});async function Ri(t){const e=`cities-${t}`,r=ie.get(e);return r&&Date.now()-r.timestamp<ye?r.data:Ci.add(async()=>{try{const s=(await ut(async()=>{const i=await C.get(Ai,{params:{country:"usa",state:t,format:"json",addressdetails:1,limit:25,featuretype:"city"},headers:{"User-Agent":"SmartWeatherMonitor/1.0"}});if(!i.data||!Array.isArray(i.data))throw new Error("Invalid response format");return i},{retries:3,minTimeout:2e3})).data.filter(i=>i.address&&i.address.state===t&&(i.address.city||i.address.town)&&!isNaN(i.lat)&&!isNaN(i.lon)).map(i=>({name:i.address.city||i.address.town,state:i.address.state,lat:parseFloat(i.lat),lon:parseFloat(i.lon)})).slice(0,_i);return ie.set(e,{data:s,timestamp:Date.now()}),s}catch(n){return console.error(`Error fetching cities for ${t}:`,n),[]}})}async function xi(t){const e=`weather-${t.name}-${t.state}`,r=ie.get(e);return r&&Date.now()-r.timestamp<ye?r.data:Si.add(async()=>{try{const n=await ut(()=>ze(t.lat,t.lon),{retries:2}),{gridX:s,gridY:i,gridId:o}=n.data.properties,a=await ut(()=>Ee(o,s,i),{retries:2}),c=xr(a),u={...t,weatherData:a,risk:c,gridInfo:{office:o,gridX:s,gridY:i}};return ie.set(e,{data:u,timestamp:Date.now()}),u}catch(n){return console.error(`Error analyzing ${t.name}, ${t.state}:`,n),null}})}async function Dr(t,e=0){if(e>=t.length)return[];const r=t.slice(e,e+qt),n=await Promise.all(r.map(s=>xi(s).catch(()=>null)));return await new Promise(s=>setTimeout(s,vi)),[...n,...await Dr(t,e+qt)]}async function $r(){try{const t=document.getElementById("highRiskCities");if(!t)return[];t.innerHTML='<div class="loading-spinner"></div>';const e=[];for(const s of Ti){const i=await Ri(s);e.push(...i),await new Promise(o=>setTimeout(o,1e3))}if(e.length===0)return t.innerHTML="<div>No cities found. Please try again later.</div>",[];const n=(await Dr(e)).filter(s=>s&&(s.risk.riskLevel==="High"||s.risk.riskLevel==="Extreme")).sort((s,i)=>i.risk.score-s.risk.score).slice(0,6);return n.length===0?(t.innerHTML="<div>No high-risk cities found at this time.</div>",[]):n}catch(t){console.error("Error analyzing high risk cities:",t);const e=document.getElementById("highRiskCities");return e&&(e.innerHTML="<div>Error loading high risk cities. Please try again later.</div>"),[]}}setInterval(()=>{const t=Date.now();for(const[e,r]of ie.entries())t-r.timestamp>ye&&ie.delete(e)},ye);setInterval(()=>{$r().catch(console.error)},ye*2);const Oi=[{name:"Houston",state:"TX",lat:29.7604,lon:-95.3698},{name:"Dallas",state:"TX",lat:32.7767,lon:-96.797},{name:"Austin",state:"TX",lat:30.2672,lon:-97.7431},{name:"San Antonio",state:"TX",lat:29.4241,lon:-98.4936},{name:"Fort Worth",state:"TX",lat:32.7555,lon:-97.3308},{name:"El Paso",state:"TX",lat:31.7619,lon:-106.485}];let Wt;const Ur=document.getElementById("citySearch"),Q=document.getElementById("searchResults"),Fi=document.getElementById("weatherContainer");function Pi(){Q.innerHTML='<div class="search-result-item">Searching...</div>',Q.style.display="block"}function Qt(){Q.innerHTML='<div class="search-result-item">No cities found. Please try again.</div>',Q.style.display="block"}async function Mi(){const t=document.getElementById("popularCities");for(const e of Oi)try{const r=await ze(e.lat,e.lon),{properties:n}=r.data,s=await Ee(n.gridId,n.gridX,n.gridY),i=document.createElement("div");i.className="city-card",i.innerHTML=`
        <div class="city-name">${e.name}, ${e.state}</div>
        <div class="city-info">
          <div> ${s.temperature}F</div>
          <div> ${s.shortForecast}</div>
        </div>
      `,i.addEventListener("click",()=>{Ni(e)}),t.appendChild(i)}catch(r){console.error(`Error fetching data for ${e.name}:`,r)}}async function Bi(){const t=document.getElementById("highRiskCities");t.innerHTML='<div class="loading-spinner"></div>';try{const e=await $r();t.innerHTML=e.map(r=>{const n=Or(r.risk.riskLevel);return`
        <div class="city-card" data-city='${JSON.stringify({value:r.gridInfo,label:`${r.name}, ${r.state}`,coordinates:`${r.lat} N, ${r.lon} W`,lat:r.lat,lon:r.lon})}'>
          <div class="city-name">${r.name}, ${r.state}</div>
          <div class="city-info">
            <div> ${r.weatherData.temperature}F</div>
            <div> ${r.weatherData.windSpeed} mph</div>
            <div> ${r.weatherData.relativeHumidity}% humidity</div>
            <div style="color: ${n}; font-weight: bold; margin-top: 0.5rem">
              ${r.risk.riskLevel} Risk (${r.risk.score}/10)
            </div>
          </div>
        </div>
      `}).join(""),t.querySelectorAll(".city-card").forEach(r=>{r.addEventListener("click",async()=>{try{const n=JSON.parse(r.dataset.city);document.getElementById("coordinates").textContent=`Coordinates: ${n.coordinates}`,document.getElementById("citySearch").value=n.label;const s=await Ee(n.value.office,n.value.gridX,n.value.gridY);mt(s,n),Ne(n.lat,n.lon)}catch(n){console.error("Error handling city selection:",n),alert("Failed to fetch weather data. Please try again.")}})})}catch(e){console.error("Error initializing high risk cities:",e),t.innerHTML='<div class="error">Failed to load high risk cities. Please try again later.</div>'}}async function Ni(t){try{const e=await ze(t.lat,t.lon),{properties:r}=e.data,n={value:{office:r.gridId,gridX:r.gridX,gridY:r.gridY},label:`${t.name}, ${t.state}`,coordinates:`${t.lat} N, ${t.lon} W`,lat:t.lat,lon:t.lon};document.getElementById("coordinates").textContent=`Coordinates: ${n.coordinates}`,document.getElementById("citySearch").value=n.label;const s=await Ee(n.value.office,n.value.gridX,n.value.gridY);mt(s,n),Ne(t.lat,t.lon)}catch{alert("Failed to fetch weather data. Please try again.")}}function mt(t,e){const r=document.getElementById("currentConditions"),n=document.getElementById("forecastDetails"),s=document.getElementById("fireRisk");r.innerHTML=`
    <div class="weather-item">
      <span class="weather-icon"></span>
      <span>Temperature: ${t.temperature}F</span>
    </div>
    <div class="weather-item">
      <span class="weather-icon"></span>
      <span>Humidity: ${t.relativeHumidity}%</span>
    </div>
    <div class="weather-item">
      <span class="weather-icon"></span>
      <span>Wind Speed: ${t.windSpeed} mph</span>
    </div>
    <div class="weather-item">
      <span class="weather-icon"></span>
      <span>Precipitation: ${t.precipitation}%</span>
    </div>
  `,n.innerHTML=`
    <div class="weather-item">${t.shortForecast}</div>
    <div style="margin-top: 1rem">${t.detailedForecast}</div>
  `;const i=xr(t),o=Or(i.riskLevel);document.body.className=`risk-${i.riskLevel.toLowerCase()}`,s.innerHTML=`
    <div class="risk-level" style="color: ${o}">${i.riskLevel} Risk Level</div>
    <div class="risk-bar">
      <div class="risk-bar-fill" style="width: ${i.score/10*100}%; background-color: ${o}"></div>
    </div>
    <h3>Contributing Factors:</h3>
    <ul class="factors-list">
      ${i.factors.map((a,c)=>`
        <li style="animation-delay: ${c*.1}s">${a}</li>
      `).join("")}
    </ul>
  `,Fi.classList.remove("hidden")}document.addEventListener("click",t=>{t.target.closest(".search-container")||(Q.style.display="none")});Ur.addEventListener("input",t=>{clearTimeout(Wt);const e=t.target.value.trim();if(e.length<2){Q.style.display="none";return}Pi(),Wt=setTimeout(async()=>{try{const r=await ii(e);if(!r||r.length===0){Qt();return}Q.innerHTML=r.map(n=>{if(!n)return"";try{return`
              <div class="search-result-item" data-city='${JSON.stringify(n)}'>
                ${n.label}
              </div>
            `}catch(s){return console.warn("Error stringifying city data:",s),""}}).filter(Boolean).join(""),Q.style.display="block"}catch(r){console.error("Search error:",r),Qt()}},300)});Q.addEventListener("click",async t=>{const e=t.target.closest(".search-result-item");if(!(!e||!e.dataset.city))try{const r=JSON.parse(e.dataset.city);if(!r)return;document.getElementById("coordinates").textContent=`Coordinates: ${r.coordinates}`,Q.style.display="none",Ur.value=r.label;const n=await Ee(r.value.office,r.value.gridX,r.value.gridY);if(mt(n,r),r.lat&&r.lon)Ne(r.lat,r.lon);else{const[s,i]=r.coordinates.split(",").map(o=>parseFloat(o.replace(" N","").replace(" W","")));Ne(s,-Math.abs(i))}}catch(r){console.error("Error handling city selection:",r),alert("Failed to fetch weather data. Please try again.")}});Mi();Bi();
